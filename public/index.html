<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script src="jquery-3.2.1.min.js"></script>
    <script src="simpleUpload.min.js"></script>
    <script src="jquery.json-viewer.js"></script>
    <link href="jquery.json-viewer.css" type="text/css" rel="stylesheet">

    <!--highlightjs-->
    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){

            $('input[type=file]').change(function(){

                $(this).simpleUpload("/ui/upload", {

                    start: function(file){
                        //upload started

                        var reader = new FileReader();
                        reader.readAsText(file, "UTF-8");
                        reader.onload = function (evt) {
                            $('.js').html(evt.target.result);
                            $('pre code').each(function(i, block) {
                                hljs.highlightBlock(block);
                            });
                        };

                        reader.onerror = function (evt) {
                            $('.js').html("Error reading file");
                        };

                    },

                    progress: function(progress){
                        //received progress
                    },

                    success: function(data){
                        //upload successful
                        var dataObj = JSON.parse(data);

                        $('.js-lint').jsonViewer(dataObj, {collapsed: true, withQuotes: true});
                    },

                    error: function(error){
                        //upload failed
                        $('#error').html("Failure!<br>" + error.name + ": " + error.message);
                    }

                });

            });

        });

    </script>
</head>
<body>

<div id="error"></div>

<pre><code class="js"></code></pre>

<pre id="json-renderer"><code class="js-lint"></code></pre>

<input id="jsFileID" type="file" name="file">

</body>
</html>